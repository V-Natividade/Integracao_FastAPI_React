{"ast":null,"code":"var _jsxFileName = \"/home/vln/\\xC1rea de Trabalho/projetos/s2isub/certi_s2i.sub-pocs/consumo_api/frontend/frontend/src/components/LoginForm/LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Actions as authActions, FETCHING_USER_FROM_TOKEN_SUCCESS } from \"../../redux/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport { EuiButton, EuiFieldText, EuiForm, EuiFormRow, EuiFieldPassword, EuiSpacer } from \"@elastic/eui\";\nimport { Link } from \"react-router-dom\";\nimport validation from \"../../utils/validation\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginFormWrapper = styled.div`\n  padding: 2rem;\n`;\n_c = LoginFormWrapper;\nconst NeedAccountLink = styled.span`\n  font-size: 0.8rem;\n`;\n_c2 = NeedAccountLink;\n\nfunction LoginForm({\n  user,\n  authError,\n  isLoading,\n  isAuthenticated,\n  requestUserLogin\n}) {\n  _s();\n\n  const [form, setForm] = React.useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [errors, setErrors] = React.useState({});\n  const [hasSubmitted, setHasSubmitted] = React.useState(false);\n\n  const validateInput = (label, value) => {\n    var _validation$label;\n\n    // Executa a função de validação na entrada, se existir\n    // Se não existir, assume que a entrada é válida\n    const isValid = (validation === null || validation === void 0 ? void 0 : validation[label]) ? validation === null || validation === void 0 ? void 0 : (_validation$label = validation[label]) === null || _validation$label === void 0 ? void 0 : _validation$label.call(validation, value) : true; // seta um erro se a validação não retornar True\n\n    setErrors(errors => ({ ...errors,\n      [label]: !isValid\n    }));\n  };\n\n  const handleInputChange = (label, value) => {\n    validateInput(label, value);\n    setForm(form => ({ ...form,\n      [label]: value\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault(); // valida a entrada antes de enviar\n\n    Object.keys(form).forEach(label => validateInput(label, form[label])); // Se alguma entrada não for inserida, retorna um aviso\n\n    if (!Object.values(form).every(value => Boolean(value))) {\n      setErrors(errors => ({ ...errors,\n        form: `Você deve preencher todos os campos.`\n      }));\n      return;\n    }\n\n    setHasSubmitted(true);\n    const action = await requestUserLogin({\n      email: form.email,\n      password: form.password\n    }); // limpa o campo da senha se a tentativa de login falhar\n\n    if ((action === null || action === void 0 ? void 0 : action.type) !== FETCHING_USER_FROM_TOKEN_SUCCESS) {\n      setForm(form => ({ ...form,\n        password: \"\"\n      }));\n    }\n  };\n\n  const getFormErrors = () => {\n    const formErrors = [];\n\n    if (authError && hasSubmitted) {\n      formErrors.push(`Credenciais inválida. Por favor, tente novamente`);\n    }\n\n    if (errors.form) {\n      formErrors.push(errors.form);\n    }\n\n    return formErrors;\n  };\n\n  return /*#__PURE__*/_jsxDEV(LoginFormWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(EuiForm, {\n      component: \"form\",\n      onSubmit: handleSubmit,\n      isInvalid: Boolean(getFormErrors().length),\n      error: getFormErrors(),\n      children: [/*#__PURE__*/_jsxDEV(EuiFormRow, {\n        label: \"Email\",\n        helpText: \"Digite seu email.\",\n        isInvalid: Boolean(errors.email),\n        error: `Por favor, digite um email válido.`,\n        children: /*#__PURE__*/_jsxDEV(EuiFieldText, {\n          icon: \"email\",\n          placeholder: \"fulano@gmail.com\",\n          value: form.email,\n          onChange: e => handleInputChange(\"email\", e.target.value),\n          \"aria-label\": \"Enter the email associated with your account.\",\n          isInvalid: Boolean(errors.email)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EuiFormRow, {\n        label: \"Password\",\n        helpText: \"Enter your password.\",\n        isInvalid: Boolean(errors.password),\n        error: `Password must be at least 7 characters.`,\n        children: /*#__PURE__*/_jsxDEV(EuiFieldPassword, {\n          placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n          value: form.password,\n          onChange: e => handleInputChange(\"password\", e.target.value),\n          type: \"dual\",\n          \"aria-label\": \"Enter your password.\",\n          isInvalid: Boolean(errors.password)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EuiSpacer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EuiButton, {\n        type: \"submit\",\n        fill: true,\n        isLoading: isLoading,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EuiSpacer, {\n      size: \"xl\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NeedAccountLink, {\n      children: [\"Need an account? Sign up \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/registration\",\n        children: \"here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 34\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginForm, \"z9DPRqNb4FdQMW616AYIFJ/JYJ0=\");\n\n_c3 = LoginForm;\n\nconst mapStateToProps = state => ({\n  authError: state.auth.error,\n  isLoading: state.auth.isLoading,\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n});\n\nconst mapDispatchToProps = dispatch => ({\n  requestUserLogin: ({\n    email,\n    password\n  }) => dispatch(authActions.requestUserLogin({\n    email,\n    password\n  }))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"LoginFormWrapper\");\n$RefreshReg$(_c2, \"NeedAccountLink\");\n$RefreshReg$(_c3, \"LoginForm\");","map":{"version":3,"sources":["/home/vln/Área de Trabalho/projetos/s2isub/certi_s2i.sub-pocs/consumo_api/frontend/frontend/src/components/LoginForm/LoginForm.js"],"names":["React","connect","Actions","authActions","FETCHING_USER_FROM_TOKEN_SUCCESS","useNavigate","EuiButton","EuiFieldText","EuiForm","EuiFormRow","EuiFieldPassword","EuiSpacer","Link","validation","styled","LoginFormWrapper","div","NeedAccountLink","span","LoginForm","user","authError","isLoading","isAuthenticated","requestUserLogin","form","setForm","useState","email","password","errors","setErrors","hasSubmitted","setHasSubmitted","validateInput","label","value","isValid","handleInputChange","handleSubmit","e","preventDefault","Object","keys","forEach","values","every","Boolean","action","type","getFormErrors","formErrors","push","length","target","mapStateToProps","state","auth","error","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport { connect } from \"react-redux\"\nimport { Actions as authActions, FETCHING_USER_FROM_TOKEN_SUCCESS } from \"../../redux/auth\"\nimport { useNavigate } from \"react-router-dom\"\nimport {\n  EuiButton,\n  EuiFieldText,\n  EuiForm,\n  EuiFormRow,\n  EuiFieldPassword,\n  EuiSpacer\n} from \"@elastic/eui\"\nimport { Link } from \"react-router-dom\"\nimport validation from \"../../utils/validation\"\nimport styled from \"styled-components\"\n\nconst LoginFormWrapper = styled.div`\n  padding: 2rem;\n`\nconst NeedAccountLink = styled.span`\n  font-size: 0.8rem;\n`\n\nfunction LoginForm({ user, authError, isLoading, isAuthenticated, requestUserLogin }) {\n  const [form, setForm] = React.useState({\n    email: \"\",\n    password: \"\"\n  })\n  const [errors, setErrors] = React.useState({})\n  const [hasSubmitted, setHasSubmitted] = React.useState(false)\n\n  const validateInput = (label, value) => {\n    // Executa a função de validação na entrada, se existir\n    // Se não existir, assume que a entrada é válida\n    const isValid = validation?.[label] ? validation?.[label]?.(value) : true\n    // seta um erro se a validação não retornar True\n    setErrors((errors) => ({ ...errors, [label]: !isValid }))\n  }\n\n  const handleInputChange = (label, value) => {\n    validateInput(label, value)\n\n    setForm((form) => ({ ...form, [label]: value }))\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    // valida a entrada antes de enviar\n    Object.keys(form).forEach((label) => validateInput(label, form[label]))\n    // Se alguma entrada não for inserida, retorna um aviso\n    if (!Object.values(form).every((value) => Boolean(value))) {\n      setErrors((errors) => ({ ...errors, form: `Você deve preencher todos os campos.` }))\n      return\n    }\n\n    setHasSubmitted(true)\n    const action = await requestUserLogin({ email: form.email, password: form.password })\n    // limpa o campo da senha se a tentativa de login falhar\n    if (action?.type !== FETCHING_USER_FROM_TOKEN_SUCCESS) {\n      setForm((form) => ({ ...form, password: \"\" }))\n    }\n  }\n\n  const getFormErrors = () => {\n    const formErrors = []\n    if (authError && hasSubmitted) {\n      formErrors.push(`Credenciais inválida. Por favor, tente novamente`)\n    }\n    if (errors.form) {\n      formErrors.push(errors.form)\n    }\n    return formErrors\n  }\n\n  return (\n    <LoginFormWrapper>\n      <EuiForm\n        component=\"form\"\n        onSubmit={handleSubmit}\n        isInvalid={Boolean(getFormErrors().length)}\n        error={getFormErrors()}\n      >\n        <EuiFormRow\n          label=\"Email\"\n          helpText=\"Digite seu email.\"\n          isInvalid={Boolean(errors.email)}\n          error={`Por favor, digite um email válido.`}\n        >\n          <EuiFieldText\n            icon=\"email\"\n            placeholder=\"fulano@gmail.com\"\n            value={form.email}\n            onChange={(e) => handleInputChange(\"email\", e.target.value)}\n            aria-label=\"Enter the email associated with your account.\"\n            isInvalid={Boolean(errors.email)}\n          />\n        </EuiFormRow>\n\n        <EuiFormRow\n          label=\"Password\"\n          helpText=\"Enter your password.\"\n          isInvalid={Boolean(errors.password)}\n          error={`Password must be at least 7 characters.`}\n        >\n          <EuiFieldPassword\n            placeholder=\"••••••••••••\"\n            value={form.password}\n            onChange={(e) => handleInputChange(\"password\", e.target.value)}\n            type=\"dual\"\n            aria-label=\"Enter your password.\"\n            isInvalid={Boolean(errors.password)}\n          />\n        </EuiFormRow>\n        <EuiSpacer />\n        <EuiButton type=\"submit\" fill isLoading={isLoading}>\n          Submit\n        </EuiButton>\n      </EuiForm>\n\n      <EuiSpacer size=\"xl\" />\n\n      <NeedAccountLink>\n        Need an account? Sign up <Link to=\"/registration\">here</Link>.\n      </NeedAccountLink>\n    </LoginFormWrapper>\n  )\n}\n\nconst mapStateToProps = (state) => ({\n  authError: state.auth.error,\n  isLoading: state.auth.isLoading,\n  isAuthenticated: state.auth.isAuthenticated,\n  user: state.auth.user\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  requestUserLogin: ({ email, password }) =>\n    dispatch(authActions.requestUserLogin({ email, password }))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm)\n"]},"metadata":{},"sourceType":"module"}